# Notesè¦†è“‹ç‡æŒ‡æ¨™èªªæ˜

## å®šç¾©

**Notesè¦†è“‹ç‡ (Speaker Notes Coverage)** æ˜¯è¡¡é‡ç°¡å ±å“è³ªçš„é‡è¦æŒ‡æ¨™ï¼Œä»£è¡¨**å«æœ‰å‚™è¨»å…§å®¹çš„æŠ•å½±ç‰‡ä½”ç¸½æŠ•å½±ç‰‡æ•¸çš„ç™¾åˆ†æ¯”**ã€‚

### è¨ˆç®—å…¬å¼

```
Notesè¦†è“‹ç‡ = (å«æœ‰å‚™è¨»çš„æŠ•å½±ç‰‡æ•¸é‡ / ç¸½æŠ•å½±ç‰‡æ•¸é‡) Ã— 100%
```

### åˆ¤å®šæ¨™æº–

ä¸€å¼µæŠ•å½±ç‰‡è¢«è¦–ç‚ºã€Œå«æœ‰å‚™è¨»ã€éœ€æ»¿è¶³ï¼š
- `slide.speaker_notes` æ¬„ä½å­˜åœ¨
- å…§å®¹ä¸ç‚ºç©ºå­—ä¸²
- å»é™¤ç©ºç™½å¾Œé•·åº¦ > 0

```python
# å¯¦ä½œç¯„ä¾‹ (ä¾†è‡ª test_integration_template.py:110-111)
slides_with_notes = sum(
    1 for s in slides
    if s.get('speaker_notes') and len(s.get('speaker_notes', '').strip()) > 0
)
notes_coverage = slides_with_notes / len(slides) if slides else 0
```

## æ¸¬è©¦çµæœåˆ†æ

### æ‚¨çš„æ¸¬è©¦çµæœ

**Zen_Serenity æ¨¡æ¿æ•´åˆæ¸¬è©¦**:
- âœ… **Notes è¦†è“‹ç‡**: 8/8 (100%)
- âŒ **Notes å¹³å‡é•·åº¦**: 18.1 å­— (ç›®æ¨™: â‰¥ 50 å­—)

```
âœ… Speaker notes è¦†è“‹ç‡ >= 70%: 8/8 (100%)
âŒ Speaker notes å¹³å‡é•·åº¦ >= 50 å­—: 18.1 å­—
```

### çµæœè§£è®€

1. **è¦†è“‹ç‡é”æ¨™** (100% > 70%)
   - æ¯å¼µæŠ•å½±ç‰‡éƒ½æœ‰å‚™è¨»å…§å®¹
   - LLM æ­£ç¢ºç†è§£äº†éœ€è¦ç‚ºæ‰€æœ‰æŠ•å½±ç‰‡ç”Ÿæˆ speaker_notes
   - ç„¡éºæ¼æŠ•å½±ç‰‡

2. **å…§å®¹æ·±åº¦ä¸è¶³** (18.1 å­— < 50 å­—)
   - å‚™è¨»é›–ç„¶å­˜åœ¨ï¼Œä½†å…§å®¹éæ–¼ç°¡çŸ­
   - å¹³å‡æ¯å¼µæŠ•å½±ç‰‡çš„å‚™è¨»åƒ… 18 å­—
   - éœ€è¦æ›´è©³ç´°çš„æ•™å­¸èªªæ˜å’Œå»¶ä¼¸å…§å®¹

## æŒ‡æ¨™é‡è¦æ€§

### 1. æ•™å­¸å“è³ªä¿éšœ
- **æ•™å¸«è¼”åŠ©**: Speaker notes æä¾›æ•™å­¸é‡é»ã€å»¶ä¼¸èªªæ˜ã€ç¯„ä¾‹è£œå……
- **èª²ç¨‹æº–å‚™**: å¹«åŠ©æ•™å¸«å¿«é€Ÿç†è§£æ¯å¼µæŠ•å½±ç‰‡çš„æ•™å­¸ç›®æ¨™
- **å…§å®¹æ·±åº¦**: ç¢ºä¿ç°¡å ±ä¸åªæ˜¯è¦–è¦ºå‘ˆç¾ï¼Œæ›´æœ‰å¯¦è³ªæ•™å­¸å…§å®¹

### 2. AI ç”Ÿæˆå“è³ªé©—è­‰
- **Demo æ¨¡å¼åµæ¸¬**: Demo fallback é€šå¸¸ä¸ç”Ÿæˆ speaker_notes (è¦†è“‹ç‡ â‰ˆ 0%)
- **LLM æˆåŠŸæŒ‡æ¨™**: é«˜è¦†è“‹ç‡è¡¨ç¤º LLM æˆåŠŸç†è§£ä¸¦åŸ·è¡Œäº†å®Œæ•´çš„ schema
- **çµæ§‹å®Œæ•´æ€§**: è¦†è“‹ç‡ â‰¥ 70% æ˜¯å“è³ªé–€æª»ä¹‹ä¸€

### 3. èˆ‡å…¶ä»–æŒ‡æ¨™çš„é—œä¿‚

| æŒ‡æ¨™ | ç›®æ¨™ | æ‚¨çš„çµæœ | ç‹€æ…‹ |
|------|------|----------|------|
| Notes è¦†è“‹ç‡ | â‰¥ 70% | 100% | âœ… å„ªç§€ |
| Notes å¹³å‡é•·åº¦ | â‰¥ 50 å­— | 18.1 å­— | âŒ éœ€æ”¹é€² |
| Bullet å¹³å‡é•·åº¦ | â‰¥ 15 å­— | (éœ€æª¢è¦–) | - |
| Layout å¤šæ¨£æ€§ | â‰¥ 5 ç¨® | (éœ€æª¢è¦–) | - |

**é—œéµç™¼ç¾**: è¦†è“‹ç‡å®Œç¾ä½†å…§å®¹æ·±åº¦ä¸è¶³ï¼Œéœ€å„ªåŒ– SYSTEM_PROMPT ä»¥ç”Ÿæˆæ›´è©³ç´°çš„ speaker_notesã€‚

## å¯¦ä½œç´°ç¯€

### æ¸¬è©¦ç¨‹å¼ç¢¼

```python
# å¾ test_integration_template.py:109-115
slides_with_notes = sum(
    1 for s in slides
    if s.get('speaker_notes') and len(s.get('speaker_notes', '').strip()) > 0
)
notes_coverage = slides_with_notes / len(slides) if slides else 0
coverage_check = notes_coverage >= 0.7
quality_checks['notes_coverage'] = coverage_check
status = "âœ…" if coverage_check else "âŒ"
print(f"{status} Speaker notes è¦†è“‹ç‡ >= 70%: {slides_with_notes}/{len(slides)} ({notes_coverage*100:.0f}%)")
```

### SYSTEM_PROMPT ç›¸é—œè¦æ±‚

ç•¶å‰ SYSTEM_PROMPT (llm_service.py:39-156) å·²åŒ…å«:
```
"speaker_notes": "å‚™è¨»å…§å®¹ï¼Œæä¾›æ•™å­¸é‡é»æˆ–å»¶ä¼¸èªªæ˜ï¼ˆé¸å¡«ï¼Œå»ºè­°50-100å­—ï¼‰"
```

## æ”¹é€²å»ºè­°

### 1. å¼·åŒ– SYSTEM_PROMPT è¦æ±‚

**ç•¶å‰å•é¡Œ**: "é¸å¡«" å°è‡´ LLM å¯èƒ½ç”Ÿæˆç°¡çŸ­å…§å®¹

**å»ºè­°ä¿®æ”¹**:
```python
# åœ¨ SYSTEM_PROMPT ä¸­å¼·èª¿
"speaker_notes": "å‚™è¨»å…§å®¹ï¼ˆå¿…å¡«ï¼Œ50-100å­—ï¼‰ã€‚è«‹æä¾›ï¼š
  - è©²æŠ•å½±ç‰‡çš„æ•™å­¸é‡é»ï¼ˆ1-2å¥ï¼‰
  - å»¶ä¼¸èªªæ˜æˆ–ç¯„ä¾‹ï¼ˆ1-2å¥ï¼‰
  - èˆ‡å‰å¾ŒæŠ•å½±ç‰‡çš„é€£è²«æ€§èªªæ˜ï¼ˆ1å¥ï¼‰"
```

### 2. å¢åŠ ç¯„ä¾‹å¼•å°

åœ¨ SYSTEM_PROMPT ä¸­åŠ å…¥å„ªè³ª speaker_notes ç¯„ä¾‹:
```json
{
  "layout": "bullets",
  "title": "é›¢æ•£æ•¸å­¸çš„å®šç¾©",
  "bullets": ["é›¢æ•£æ•¸å­¸èšç„¦æ–¼æ•´æ•¸ã€é›†åˆã€åœ–å½¢ç­‰é›¢æ•£çµæ§‹", ...],
  "speaker_notes": "æœ¬æŠ•å½±ç‰‡ä»‹ç´¹é›¢æ•£æ•¸å­¸çš„æ ¸å¿ƒæ¦‚å¿µã€‚é‡é»èªªæ˜é›¢æ•£çµæ§‹èˆ‡é€£çºŒæ•¸å­¸çš„å·®ç•°ï¼Œå¼·èª¿é›¢æ•£æ•¸å­¸åœ¨è¨ˆç®—æ©Ÿç§‘å­¸ä¸­çš„æ‡‰ç”¨ã€‚å¯èˆ‰ä¾‹ï¼šæ•´æ•¸é‹ç®— vs å¾®ç©åˆ†ã€åœ–è«– vs å¹¾ä½•ã€‚èˆ‡ä¸‹ä¸€å¼µæŠ•å½±ç‰‡çš„éè¿´é—œä¿‚æ¦‚å¿µç·Šå¯†ç›¸é—œã€‚"
}
```

### 3. å¢åŠ é©—è­‰è¦å‰‡

åœ¨æ¸¬è©¦ä¸­åŠ å…¥æ›´åš´æ ¼çš„ notes å“è³ªæª¢æŸ¥:
```python
# å»ºè­°çš„å¤šå±¤æ¬¡é©—è­‰
quality_checks['notes_coverage'] = notes_coverage >= 0.7          # åŸºæœ¬è¦†è“‹ç‡
quality_checks['notes_length'] = avg_note_len >= 50               # å¹³å‡é•·åº¦
quality_checks['notes_min_length'] = min_note_len >= 30           # æœ€çŸ­é•·åº¦
quality_checks['notes_consistency'] = std_note_len < 50           # é•·åº¦ä¸€è‡´æ€§
```

### 4. åˆ†å±¤å“è³ªæ¨™æº–

| ç­‰ç´š | Notes è¦†è“‹ç‡ | Notes å¹³å‡é•·åº¦ | æè¿° |
|------|--------------|----------------|------|
| ğŸ¥‡ å„ªç§€ | â‰¥ 90% | â‰¥ 80 å­— | æ¯å¼µæŠ•å½±ç‰‡éƒ½æœ‰è©³ç´°æ•™å­¸èªªæ˜ |
| ğŸ¥ˆ è‰¯å¥½ | â‰¥ 80% | â‰¥ 60 å­— | å¤§éƒ¨åˆ†æŠ•å½±ç‰‡æœ‰å……åˆ†èªªæ˜ |
| ğŸ¥‰ åŠæ ¼ | â‰¥ 70% | â‰¥ 50 å­— | ç¬¦åˆåŸºæœ¬æ•™å­¸éœ€æ±‚ |
| âš ï¸ å¾…æ”¹é€² | < 70% | < 50 å­— | éœ€è¦å„ªåŒ– |

**æ‚¨çš„ç•¶å‰ç­‰ç´š**: âš ï¸ å¾…æ”¹é€² (è¦†è“‹ç‡ 100% å„ªç§€ï¼Œä½†é•·åº¦ 18.1 å­—ä¸è¶³)

## ç¸½çµ

- **Notes è¦†è“‹ç‡** æ˜¯ç°¡å ±å“è³ªçš„**çµæ§‹æ€§æŒ‡æ¨™**ï¼Œç¢ºä¿æ¯å¼µæŠ•å½±ç‰‡éƒ½æœ‰æ•™å­¸è¼”åŠ©å…§å®¹
- **Notes å¹³å‡é•·åº¦** æ˜¯ç°¡å ±å“è³ªçš„**å…§å®¹æ€§æŒ‡æ¨™**ï¼Œç¢ºä¿æ•™å­¸èªªæ˜è¶³å¤ è©³ç´°
- **å…©è€…ç¼ºä¸€ä¸å¯**: é«˜è¦†è“‹ç‡ + çŸ­å…§å®¹ = å½¢å¼é”æ¨™ä½†å¯¦è³ªä¸è¶³
- **æ”¹é€²æ–¹å‘**: ä¿®æ”¹ SYSTEM_PROMPTï¼Œå°‡ speaker_notes å¾ã€Œé¸å¡«ã€æ”¹ç‚ºã€Œå¿…å¡«ã€ï¼Œä¸¦æä¾›å­—æ•¸ç¯„åœå’Œå…§å®¹çµæ§‹å»ºè­°

---

*æ–‡ä»¶ç”Ÿæˆæ™‚é–“: 2026-02-17*
*æ¸¬è©¦æ•¸æ“šä¾†æº: test/test_integration_template.py (Zen_Serenity æ¨¡æ¿æ¸¬è©¦)*
*ç›¸é—œæ–‡ä»¶: claudedocs/é‡è©¦æ©Ÿåˆ¶å¯¦ä½œç¸½çµ.md*
